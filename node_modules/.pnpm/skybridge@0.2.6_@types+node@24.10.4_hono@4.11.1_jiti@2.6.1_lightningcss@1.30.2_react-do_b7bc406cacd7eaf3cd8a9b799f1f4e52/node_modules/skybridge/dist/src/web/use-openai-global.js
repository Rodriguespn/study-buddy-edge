import { useSyncExternalStore } from "react";
import { SET_GLOBALS_EVENT_TYPE, SetGlobalsEvent } from "./types.js";
export function useOpenAiGlobal(key) {
    return useSyncExternalStore((onChange) => {
        const handleSetGlobal = (event) => {
            const value = event.detail.globals[key];
            if (value === undefined) {
                return;
            }
            console.dir(event.detail.globals, { depth: Infinity });
            onChange();
        };
        window.addEventListener(SET_GLOBALS_EVENT_TYPE, handleSetGlobal, {
            passive: true,
        });
        return () => {
            window.removeEventListener(SET_GLOBALS_EVENT_TYPE, handleSetGlobal);
        };
    }, () => window.openai?.[key]);
}
//# sourceMappingURL=use-openai-global.js.map